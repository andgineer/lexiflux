{"uid":"e326f2f2ed030bd1","name":"test_link_click_with_missing_parameters","fullName":"tests.test_book_epub_import_integration.TestInternalLinkClicking#test_link_click_with_missing_parameters","historyId":"49d0c61e89e8cb33ad30c0edc817a09c","time":{"start":1767259861595,"stop":1767259861612,"duration":17},"description":"Test link_click view with missing required parameters.","descriptionHtml":"<p>Test link_click view with missing required parameters.</p>\n","status":"failed","statusMessage":"AssertionError: assert {'error': 'No...ccess': False} == {'error': 'Li...ccess': False}\n  \n  Omitting 1 identical items, use -vv to show\n  Differing items:\n  {'error': 'No link provided'} != {'error': 'Link None not found in anchor map'}\n  \n  Full diff:\n    {\n  -     'error': 'Link None not found in anchor map',\n  +     'error': 'No link provided',\n        'success': False,\n    }","statusTrace":"self = <test_book_epub_import_integration.TestInternalLinkClicking object at 0x7fcec919d9d0>\nsetup_book_with_links = {'book': <Book: Test Book with Links>, 'pages': [<BookPage: Page 1 of Test Book with Links>, <BookPage: Page 2 of Test Book with Links>, <BookPage: Page 3 of Test Book with Links>], 'user': <CustomUser: testuser>}\n\n    def test_link_click_with_missing_parameters(self, setup_book_with_links):\n        \"\"\"Test link_click view with missing required parameters.\"\"\"\n        data = setup_book_with_links\n        client = Client()\n        client.force_login(data[\"user\"])\n    \n        # Test with missing book-code - should return 500 because view tries to get book with None\n        response = client.post(\"/link_click\", {\"link\": \"page2.xhtml#section1\"})\n        assert response.status_code == 500\n    \n        # Test with missing link - should return JSON error\n        response = client.post(\n            \"/link_click\",\n            {\n                \"book-code\": data[\"book\"].code,\n            },\n        )\n        # The view doesn't explicitly check for missing link, it will try to process None\n        assert response.status_code == 200\n>       assert response.json() == {\"success\": False, \"error\": \"Link None not found in anchor map\"}\nE       AssertionError: assert {'error': 'No...ccess': False} == {'error': 'Li...ccess': False}\nE         \nE         Omitting 1 identical items, use -vv to show\nE         Differing items:\nE         {'error': 'No link provided'} != {'error': 'Link None not found in anchor map'}\nE         \nE         Full diff:\nE           {\nE         -     'error': 'Link None not found in anchor map',\nE         +     'error': 'No link provided',\nE               'success': False,\nE           }\n\ntests/test_book_epub_import_integration.py:418: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_fail_for_invalid_template_variable","time":{"start":1767259848907,"stop":1767259848907,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_test_environment","time":{"start":1767259848908,"stop":1767259848909,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1767259848909,"stop":1767259848995,"duration":86},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_db_blocker","time":{"start":1767259848995,"stop":1767259848995,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"use_non_threaded_server","time":{"start":1767259848995,"stop":1767259848995,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_db_use_migrations","time":{"start":1767259848995,"stop":1767259848995,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_db_modify_db_settings_tox_suffix","time":{"start":1767259848996,"stop":1767259848996,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_db_createdb","time":{"start":1767259848996,"stop":1767259848996,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_db_modify_db_settings_parallel_suffix","time":{"start":1767259848996,"stop":1767259848996,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_db_keepdb","time":{"start":1767259848996,"stop":1767259848996,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_db_modify_db_settings_xdist_suffix","time":{"start":1767259848996,"stop":1767259848996,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_db_setup","time":{"start":1767259848997,"stop":1767259851678,"duration":2681},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_db_modify_db_settings","time":{"start":1767259848997,"stop":1767259848997,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_django_setup_unittest","time":{"start":1767259858350,"stop":1767259858350,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_django_db_marker","time":{"start":1767259861116,"stop":1767259861117,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_dj_autoclear_mailbox","time":{"start":1767259861116,"stop":1767259861116,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_django_db_helper","time":{"start":1767259861116,"stop":1767259861117,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_django_clear_site_cache","time":{"start":1767259861116,"stop":1767259861116,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_template_string_if_invalid_marker","time":{"start":1767259861117,"stop":1767259861117,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"monkeypatch","time":{"start":1767259861117,"stop":1767259861117,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_django_set_urlconf","time":{"start":1767259861117,"stop":1767259861117,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_live_server_helper","time":{"start":1767259861117,"stop":1767259861117,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mock_detect_language","time":{"start":1767259861118,"stop":1767259861118,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"db","time":{"start":1767259861118,"stop":1767259861119,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"db_init","time":{"start":1767259861119,"stop":1767259861119,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_book_with_links","time":{"start":1767259861119,"stop":1767259861593,"duration":474},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test link_click view with missing required parameters.","status":"failed","statusMessage":"AssertionError: assert {'error': 'No...ccess': False} == {'error': 'Li...ccess': False}\n  \n  Omitting 1 identical items, use -vv to show\n  Differing items:\n  {'error': 'No link provided'} != {'error': 'Link None not found in anchor map'}\n  \n  Full diff:\n    {\n  -     'error': 'Link None not found in anchor map',\n  +     'error': 'No link provided',\n        'success': False,\n    }","statusTrace":"self = <test_book_epub_import_integration.TestInternalLinkClicking object at 0x7fcec919d9d0>\nsetup_book_with_links = {'book': <Book: Test Book with Links>, 'pages': [<BookPage: Page 1 of Test Book with Links>, <BookPage: Page 2 of Test Book with Links>, <BookPage: Page 3 of Test Book with Links>], 'user': <CustomUser: testuser>}\n\n    def test_link_click_with_missing_parameters(self, setup_book_with_links):\n        \"\"\"Test link_click view with missing required parameters.\"\"\"\n        data = setup_book_with_links\n        client = Client()\n        client.force_login(data[\"user\"])\n    \n        # Test with missing book-code - should return 500 because view tries to get book with None\n        response = client.post(\"/link_click\", {\"link\": \"page2.xhtml#section1\"})\n        assert response.status_code == 500\n    \n        # Test with missing link - should return JSON error\n        response = client.post(\n            \"/link_click\",\n            {\n                \"book-code\": data[\"book\"].code,\n            },\n        )\n        # The view doesn't explicitly check for missing link, it will try to process None\n        assert response.status_code == 200\n>       assert response.json() == {\"success\": False, \"error\": \"Link None not found in anchor map\"}\nE       AssertionError: assert {'error': 'No...ccess': False} == {'error': 'Li...ccess': False}\nE         \nE         Omitting 1 identical items, use -vv to show\nE         Differing items:\nE         {'error': 'No link provided'} != {'error': 'Link None not found in anchor map'}\nE         \nE         Full diff:\nE           {\nE         -     'error': 'Link None not found in anchor map',\nE         +     'error': 'No link provided',\nE               'success': False,\nE           }\n\ntests/test_book_epub_import_integration.py:418: AssertionError","steps":[],"attachments":[{"uid":"8ac2744853daba4b","name":"log","source":"8ac2744853daba4b.txt","type":"text/plain","size":2150},{"uid":"e2e9f5e4946db3ab","name":"stderr","source":"e2e9f5e4946db3ab.txt","type":"text/plain","size":2212}],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":2,"stepsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"mock_detect_language::0","time":{"start":1767259861848,"stop":1767259861848,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"monkeypatch::0","time":{"start":1767259861849,"stop":1767259861849,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_django_set_urlconf::0","time":{"start":1767259861850,"stop":1767259861850,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_live_server_helper::0","time":{"start":1767259861850,"stop":1767259861850,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_django_db_helper::0","time":{"start":1767259861851,"stop":1767259861852,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_django_setup_unittest::0","time":{"start":1767259862304,"stop":1767259862304,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_db_setup::0","time":{"start":1767259996795,"stop":1767259996795,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"use_non_threaded_server::0","time":{"start":1767259996838,"stop":1767259996838,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"django_test_environment::0","time":{"start":1767259996844,"stop":1767259996844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_fail_for_invalid_template_variable::0","time":{"start":1767259996846,"stop":1767259996846,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"EPUB import integration tests"},{"name":"epic","value":"Book import"},{"name":"tag","value":"django_db"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_book_epub_import_integration"},{"name":"subSuite","value":"TestInternalLinkClicking"},{"name":"host","value":"runnervmh13bl"},{"name":"thread","value":"3849-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_book_epub_import_integration"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":72,"unknown":0,"total":73},"items":[{"uid":"1d7490d0c3fcedab","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/775/index.html#testresult/1d7490d0c3fcedab","status":"passed","time":{"start":1767256780423,"stop":1767256780434,"duration":11}},{"uid":"6233af8a3d6025ed","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/774/index.html#testresult/6233af8a3d6025ed","status":"passed","time":{"start":1764046888164,"stop":1764046888174,"duration":10}},{"uid":"731faba6e67cf84c","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/773/index.html#testresult/731faba6e67cf84c","status":"passed","time":{"start":1763875806176,"stop":1763875806191,"duration":15}},{"uid":"25396d9a59551e51","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/772/index.html#testresult/25396d9a59551e51","status":"passed","time":{"start":1763792436187,"stop":1763792436197,"duration":10}},{"uid":"3247ed76f216088c","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/771/index.html#testresult/3247ed76f216088c","status":"passed","time":{"start":1763702075624,"stop":1763702075634,"duration":10}},{"uid":"530ac4ddb4fd09ee","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/770/index.html#testresult/530ac4ddb4fd09ee","status":"passed","time":{"start":1763616160130,"stop":1763616160140,"duration":10}},{"uid":"b934dd4dea858fef","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/769/index.html#testresult/b934dd4dea858fef","status":"passed","time":{"start":1763615075869,"stop":1763615075879,"duration":10}},{"uid":"613c060b8c7c2f73","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/768/index.html#testresult/613c060b8c7c2f73","status":"passed","time":{"start":1763529099906,"stop":1763529099916,"duration":10}},{"uid":"c1c56e4571bbd25e","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/767/index.html#testresult/c1c56e4571bbd25e","status":"passed","time":{"start":1763461147032,"stop":1763461147042,"duration":10}},{"uid":"afe0b67a42850921","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/765/index.html#testresult/afe0b67a42850921","status":"passed","time":{"start":1763442712305,"stop":1763442712314,"duration":9}},{"uid":"1decd129f08e5064","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/764/index.html#testresult/1decd129f08e5064","status":"passed","time":{"start":1763203140214,"stop":1763203140225,"duration":11}},{"uid":"3ecc394e334a945","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/762/index.html#testresult/3ecc394e334a945","status":"passed","time":{"start":1763097341031,"stop":1763097341042,"duration":11}},{"uid":"dfe3c0288e1db285","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/761/index.html#testresult/dfe3c0288e1db285","status":"passed","time":{"start":1763021339720,"stop":1763021339729,"duration":9}},{"uid":"db2c3e73a9f3ada1","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/760/index.html#testresult/db2c3e73a9f3ada1","status":"passed","time":{"start":1763011028344,"stop":1763011028356,"duration":12}},{"uid":"865968034a5a3925","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/759/index.html#testresult/865968034a5a3925","status":"passed","time":{"start":1761216984667,"stop":1761216984677,"duration":10}},{"uid":"56ade3eb12ea36e0","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/758/index.html#testresult/56ade3eb12ea36e0","status":"passed","time":{"start":1758687816965,"stop":1758687816975,"duration":10}},{"uid":"429c3876de82049f","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/757/index.html#testresult/429c3876de82049f","status":"passed","time":{"start":1758600458264,"stop":1758600458278,"duration":14}},{"uid":"bed9257dad75fe0f","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/756/index.html#testresult/bed9257dad75fe0f","status":"passed","time":{"start":1758514879587,"stop":1758514879600,"duration":13}},{"uid":"971488f20108ca6d","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/755/index.html#testresult/971488f20108ca6d","status":"passed","time":{"start":1758461320533,"stop":1758461320544,"duration":11}},{"uid":"4b47e9df3f32147a","reportUrl":"https://andgineer.github.io/lexiflux/builds/tests/753/index.html#testresult/4b47e9df3f32147a","status":"passed","time":{"start":1758348863334,"stop":1758348863344,"duration":10}}]},"tags":["django_db"]},"source":"e326f2f2ed030bd1.json","parameterValues":[]}